# [Coroutine&Flow] 04장 취소와 타임아웃1

![coroutine4_image1.jpg.jpg](%5BCoroutine&Flow%5D%2004%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%B1%E1%84%89%E1%85%A9%E1%84%8B%E1%85%AA%20%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%A1%E1%84%8B%E1%85%AE%E1%86%BA1%2005eef72447a5427c998753f713c28520/coroutine4_image1.jpg.jpg)

## Job에 대해 취소

명시적인 `Job`에 대해 `cancel`메서드를 호출하여 취소할 수 있다.

```kotlin
import kotlinx.coroutines.*

suspend fun doOneTwoThree() = coroutineScope {
    val job1 = launch {
        println("launch1: ${Thread.currentThread().name}")
        delay(1000L)
        println("3!")
    }

    val job2 = launch {
        println("launch2: ${Thread.currentThread().name}")
        println("1!")
    }

    val job3 = launch {
        println("launch3: ${Thread.currentThread().name}")
        delay(500L)
        println("2!")  
    }

    delay(800L)
    job1.cancel()
    job2.cancel()
    job3.cancel()
    println("4!")
}

fun main() = runBlocking {
    doOneTwoThree()
    println("runBlocking: ${Thread.currentThread().name}")
    println("5!")
}
```

```kotlin
launch1: main @coroutine#2
launch2: main @coroutine#3
1!
launch3: main @coroutine#4
2!
4!
runBlocking: main @coroutine#1
5!
```

## 취소 불가능한 Job

`launch(Dispatchers.Default)`는 그 다음 코드 블록을 다른 스레드에서 수행을 시킨다.

```kotlin
import kotlinx.coroutines.*

suspend fun doCount() = coroutineScope {
    val job1 = launch(Dispatchers.Default) {
        var i = 1
        var nextTime = System.currentTimeMillis() + 100L

        while (i <= 10) {
            val currentTime = System.currentTimeMillis()
            if (currentTime >= nextTime) {
                println(i)
                nextTime = currentTime + 100L
                i++
            }
        }
    }
    
    delay(200L)
    job1.cancel()
    println("doCount Done!")
}

fun main() = runBlocking {
    doCount()
}
```

<iframe src="https://pl.kotl.in/TbKeEhoQE?from=1&to=25"></iframe>